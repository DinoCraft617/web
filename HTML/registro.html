<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Usuario</title>
    <link rel="stylesheet" href="../CSS/index.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div>
        <h1>Registro de Usuario - FROMSOFTWARE</h1>
    </div>
    <div class="register-container">
        <form id="registerForm">
            <input type="text" name="new_user" class="input-field" placeholder="Nuevo Usuario" required>
            <input type="password" name="new_password" class="input-field" placeholder="Nueva Contraseña" required>
            <input type="button" value="Registrarse" onclick="register()">
            <input class="button" type="button" value="Iniciar Sesión" onclick="window.location.href='../HTML/index.html'">
        </form>
    </div>
    <div>
        <h4>Únete para compartir estrategias, consejos y experiencias en los juegos de FromSoftware.</h4>
    </div>

    <script>
        function register() {
            var newUser = $("input[name='new_user']").val();
            var newPassword = $("input[name='new_password']").val();
            
            $.ajax({
                url: "/Proyecto/PHP/registro.php",
                method: "POST",
                data: {
                    new_user: newUser,
                    new_password: newPassword
                },
                success: function(response) {
                    if (response.trim() === "success") {
                        alert("Usuario registrado con éxito. Ahora puedes iniciar sesión.");
                        window.location.href = "/Proyecto/HTML/index.html"; // Redirige al login
                    } else {
                        alert("Error al registrar el usuario.");
                    }
                }
            });
        }
    </script>
</body>
</html>
